<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Blockem. Compiling the sources in windows</title>
  <meta content="Faustino Frechilla" name="author">
  <meta content="Blockem project page. Compiling Blockem in windows" name="description">
  <meta content="blockem blokus board game freeware free download gratis gnu gpl compile gtkmm windows" name="keywords">
  <meta content="all" name="robots">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta name="generator" content="Bluefish 1.0.7">
  <link rel="shortcut icon" href="../images/blockemicon.ico" type="image/x-icon" />
  <!-- css style -->
  <style  type="text/css">
    a:link {
        color: #453b77;
    }
    a:visited {
        color: #453b77;
    }
    a:hover{
        color: #453b77;
        background-color: #fde72d;
    }
    a:active {
        color: #453b77;
    }
    a {
        text-decoration: underline;
    }
  </style>
  
  </head>

<body style="background-color: rgb(255, 216, 165);">
<table align="center" border="0" cellpadding="5" width="95%">
  <tbody>
    <tr>
      <td valign="top" width="25%" align="right"><a href="http://blockem.sourceforge.net/" style="text-decoration:none; background-color: #ffd8a5">
              <img alt="blockem icon" src="../images/blockemlogo128.png" border="0"></a>
      </td>
      <td align="left" width="75%"valign="vcenter"><a href="http://blockem.sourceforge.net/" style="text-decoration:none">
        <h1> Blockem</h1></a>
      </td>
    </tr>
    <tr>
      <td valign="top" width="25%">
      <br/>
      <p align="center"><img alt="blockem game" src="../images/screenshot.jpg" border="0"></p>
      <p align="center">Found a bug? File it <a href="http://sourceforge.net/tracker/?func=add&group_id=302382&atid=1274903">here</a>. It will be fixed as soon as possible!</p>
      <p></p>
      <br/>
      <p align="center"><font size="+1"><a href="http://blockem.sourceforge.net/index.html#download">Download</a></font> blockem...</p>
      <p align="center">... or have a look at the <a href="http://sourceforge.net/project/screenshots.php?group_id=302382">screenshots</a></p>
      <p><br/></p>
      </td>
      <td>
      <p align="left"><h2>Compiling blockem sources in windows</h2></p>
      <p>
      <ul>
        <li>First of all you'll need to install the MinGW environment in your windows machine. Have a look at: 
            <a href="http://www.mingw.org/wiki/HOWTO_Install_the_MinGW_GCC_Compiler_Suite">http://www.mingw.org/wiki/HOWTO_Install_the_MinGW_GCC_Compiler_Suite</a></li>

        <li>You'll also need the port of the GTKmm library for windows. Have a look at:
            <a href="http://live.gnome.org/gtkmm/MSWindows/">http://live.gnome.org/gtkmm/MSWindows/</a></li>

        <li>I installed the following packages in my windows machine to compile blockem in windows. And it works:
        <ul>
         <li>gtkmm-win32-devel-2.16.0-4.exe</li>
         <li>gcc-c++-4.4.0-mingw32-bin.tar.gz</li>
         <li>gcc-c++-4.4.0-mingw32-dll.tar.gz</li>
         <li>gcc-core-4.4.0-mingw32-bin.tar.gz</li>
         <li>gcc-core-4.4.0-mingw32-dll.tar.gz</li>
         <li>gmp-4.2.4-mingw32-dll.tar.gz</li>
         <li>mpfr-2.4.1-mingw32-dll.tar.gz</li>
         <li>libiconv-1.13.1-1-mingw32-dll-2.tar.Izma</li>
         <li>w32api-3.14-mingw32-dev.tar.gz</li>
         <li>MSYS-1.0.11.exe</li>
         <li>mingwrt-3.18-mingw32-dev.tar.gz</li>
         <li>mingwrt-3.18-mingw32-dll.tar.gz</li>
         <li>binutils-2.20.1-2-ming232-bin.tar.gz</li>
         <li>make-3.81-20090914-mingw32-bin.tar.gz</li>
        </ul>
        </li>
        <li>From version 0.2.4 blockem has support for internationalization, (uses gettext
for that matter). These are the packets you need to compile blockem in win32
with full support for localization
        <ul>
         <li>gettext-0.17-2-msys-1.0.13-bin.tar.lzma</li>
         <li>gettext-0.17-2-msys-1.0.13-dev.tar.lzma</li>
         <li>libintl-0.17-2-msys-dll-8.tar.lzma</li>
         <li>libgettextpo-0.17-2-msys-dll-0.tar.lzma</li>
         <li>libtermcap-0.20050421_1-2-msys-1.0.13-dll-0.tar.lzma</li>
         <li>libexpat-2.0.1-1-msys-1.0.13-dll-1.tar.lzma</li>
         <li>libiconv-1.13.1-2-msys-1.0.13-dll-2.tar.lzma</li>
        </ul>
        </li>
        <li>libintl is not included in the packets above because compiling the app against
the libintl version included in MinGW is giving errors at linking time:<br/>
<pre>
    main.o:main.cpp:(.text+0x191b): undefined reference to '__printf__'
</pre>
        </li>
        <li>to prevent this from happening you have to pass a few options to the configure
script to force the app to compile against the gettext library included in
the package. Pthreads should also be disabled since having them on produces
a lot of linker errors when blockem is linked against the libintl library.
Libintl can be built without pthread support without any problem, and blockem 
will still have 2 threds because they are gthreads instead of pthreads.So, 
to summarise, after setting up your environment correctly you will have to
run the configure script like this:<br/>
<pre>
    ./configure --with-included-gettext --disable-threads
</pre>
        </li>Now, once the configure script has been run the app is ready to be compiled
using the command 'make', but before you do this you've got to bear in mind
localization in win32 is different from GNU Linux systems. To force blockem
to be shown in a specific language (obviously, a language that blockem has 
already been translated into) you just have to run from a terminal (it'll 
be translated into Spanish):<br/>
<pre>
    $ LANG=es_ES.UTF-8 blockem
</pre>
        <li>if no LANG variable is set when you run blockem the app will retrieve the 
system's one, wich will be english if your system was originally installed
in English, or Spanish, etc.
        </li>
        <li>Gtk retrieves the system default language In win32, but it cannot be set
as easily as in Linux if you want to change the language. So a decission
had to be made on how blockem will be handling languages on win32 platforms.
For the moment there is a call to putenv in main.cpp that decides which 
language blockem will run with. It is hardcoded and it can only be changed
at compile time:<br/>
<pre>
    // This call force the app to be shown on a Spanish (Spain)
    putenv ("LANG=es_ES");
</pre>
        </li>
        <li>
So for the moment blockem is compiled as many times as languages are supported,
therefore one package is released per language and the user can pick which
version he/she wants. In the future language will be picked using the menus of
the application, but this is doing the trick for now
        </li>
      </p>
</table>

<hr>
<table align="center" border="0" cellpadding="5" width="95%">
  <tbody>
    <tr>
      <td align="left" width="50%">
        <p>
        <small>
          Copyright (c) 2009-<script type="text/javascript">var d = new Date();document.write(d.getFullYear());</script>. <a href="http://www.sourceforge.net/sendmessage.php?touser=743915">Faustino Frechilla</a><br>Last modified: 21st June 2010
        </small> 
        </p>
      </td>
      <td align="right" width="50%">
      <a rel="license" href="http://creativecommons.org/licenses/by/3.0/es/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/es/88x31.png" /></a>
      &nbsp;
      <a href="http://sourceforge.net/projects/blockem"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=302382&amp;type=3" alt="SourceForge.net" /></a>
      </td>
    </tr>
  </tbody>
</table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-16028570-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>


